package com.eoss.hft;

import org.json.JSONArray;
import org.json.JSONObject;

public class JSONConvertTester {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		
		String jsonString = "{\"bids\":[[\"0.00084549\",\"2.34868889\"],[\"0.01807378\",\"0.05067256\"],[\"0.01807340\",\"0.04164759\"],[\"0.01795000\",\"0.02778552\"],[\"0.01794999\",\"0.23213922\"],[\"0.01794701\",\"23.86415006\"],[\"0.01794700\",\"1.11160640\"],[\"0.01794599\",\"13.26675017\"],[\"0.01783510\",\"2.64337528\"],[\"0.01783359\",\"5.26428301\"],[\"0.01780000\",\"2.76864083\"],[\"0.01763620\",\"0.36350533\"],[\"0.01762984\",\"23.86415023\"],[\"0.01758888\",\"9.97500000\"],[\"0.01720000\",\"0.10598785\"],[\"0.01720000\",\"18.49400724\"],[\"0.01700000\",\"0.17010954\"],[\"0.01690000\",\"0.49604554\"],[\"0.01680000\",\"6.00665347\"],[\"0.01680000\",\"0.06204925\"],[\"0.01650000\",\"9.82273253\"],[\"0.01629948\",\"0.07108975\"],[\"0.01616000\",\"0.18118513\"],[\"0.01610002\",\"0.03221735\"],[\"0.01608888\",\"0.06199934\"],[\"0.01600000\",\"0.37406250\"],[\"0.01540001\",\"1.80414081\"],[\"0.01520417\",\"0.99750000\"],[\"0.01520401\",\"0.03477208\"],[\"0.01519990\",\"0.40208181\"],[\"0.01518799\",\"0.03480875\"],[\"0.01500000\",\"0.05195911\"],[\"0.01500000\",\"0.15503810\"],[\"0.01472372\",\"0.03590635\"],[\"0.01448002\",\"0.03651065\"],[\"0.01420002\",\"0.03512319\"],[\"0.01406516\",\"0.03545996\"],[\"0.01365720\",\"21.91151920\"],[\"0.01360011\",\"0.03667250\"],[\"0.01300003\",\"0.08440365\"],[\"0.01300001\",\"0.76730710\"],[\"0.01300000\",\"0.04425831\"],[\"0.01253135\",\"0.04616821\"],[\"0.01253134\",\"1.15998437\"],[\"0.01200002\",\"0.09143735\"],[\"0.01100002\",\"0.05350218\"],[\"0.01010000\",\"9.87623762\"],[\"0.00885301\",\"13.52082512\"],[\"0.00800000\",\"8.72812500\"],[\"0.00800000\",\"6.23437500\"],[\"0.00650000\",\"0.07673077\"],[\"0.00641590\",\"0.07773656\"],[\"0.00174989\",\"1.14007166\"],[\"0.00171000\",\"116.66666667\"],[\"0.00168000\",\"8.60937500\"],[\"0.00051000\",\"29.33823529\"],[\"0.00048910\",\"101.97301165\"],[\"0.00048900\",\"1.99500000\"],[\"0.00036598\",\"408.83381606\"],[\"0.00010100\",\"98.76237624\"],[\"0.00010000\",\"99.75000000\"]],\"asks\":[[\"0.01841959\",\"23.80000000\"],[\"0.01842000\",\"0.25403552\"],[\"0.01844879\",\"0.43363277\"],[\"0.01844999\",\"0.25000000\"],[\"0.01845000\",\"4.47706136\"],[\"0.01846769\",\"0.30000000\"],[\"0.01849998\",\"0.54000000\"],[\"0.01853097\",\"0.30000000\"],[\"0.01853099\",\"0.24000000\"],[\"0.01853100\",\"4.63341195\"],[\"0.01857896\",\"0.25000000\"],[\"0.01857898\",\"0.08000000\"],[\"0.01857900\",\"0.11085860\"],[\"0.01859979\",\"0.08000000\"],[\"0.01859979\",\"0.24000000\"],[\"0.01859980\",\"0.09664730\"],[\"0.01859980\",\"2.61185912\"],[\"0.01860736\",\"0.25000000\"],[\"0.01862618\",\"0.24000000\"],[\"0.01862998\",\"0.04000000\"],[\"0.01862999\",\"0.18098099\"],[\"0.01863371\",\"0.04059773\"],[\"0.01865444\",\"13.60000000\"],[\"0.01866997\",\"0.08000000\"],[\"0.01870734\",\"0.04000000\"],[\"0.01871396\",\"0.04000000\"],[\"0.01873431\",\"0.04027904\"],[\"0.01879495\",\"0.04000000\"],[\"0.01879992\",\"0.04000000\"],[\"0.01879993\",\"0.48829295\"],[\"0.01879995\",\"0.31784885\"],[\"0.01879998\",\"0.04000000\"],[\"0.01880000\",\"0.16012990\"],[\"0.01880000\",\"1.00297937\"],[\"0.01884998\",\"0.04000000\"],[\"0.01889801\",\"0.08000000\"],[\"0.01890000\",\"0.12019481\"],[\"0.01890000\",\"0.47376248\"],[\"0.01890000\",\"0.28625978\"],[\"0.01891007\",\"2.07065417\"],[\"0.01892998\",\"0.04000000\"],[\"0.01895000\",\"0.07281022\"],[\"0.01896000\",\"0.10075990\"],[\"0.01898000\",\"1.03713940\"],[\"0.01899800\",\"0.92159825\"],[\"0.01899880\",\"0.18239186\"],[\"0.01899897\",\"0.04000000\"],[\"0.01899900\",\"5.15951335\"],[\"0.01899999\",\"0.73904286\"],[\"0.01900000\",\"0.21529822\"],[\"0.01900000\",\"0.06829720\"],[\"0.01900000\",\"5.00000000\"],[\"0.01900000\",\"0.12055563\"],[\"0.01910000\",\"0.07601302\"],[\"0.01910000\",\"6.25294246\"],[\"0.01910000\",\"0.58676471\"],[\"0.01920000\",\"0.19685064\"],[\"0.01922000\",\"0.94190984\"],[\"0.01924463\",\"0.05483796\"],[\"0.01928000\",\"1.00000015\"],[\"0.01978786\",\"1.00000000\"],[\"0.01988500\",\"11.08202030\"],[\"0.01990000\",\"3.00000000\"],[\"0.02000000\",\"1.99499965\"],[\"0.02000000\",\"0.98671174\"],[\"0.02000000\",\"1.39044491\"],[\"0.02000000\",\"0.36336549\"],[\"0.02000000\",\"0.46312335\"],[\"0.02000000\",\"1.31809144\"],[\"0.02000000\",\"1.14300000\"],[\"0.02000000\",\"0.42473628\"],[\"0.02000000\",\"18.96609830\"],[\"0.02000000\",\"0.45823000\"],[\"0.02036799\",\"0.55657749\"],[\"0.02039499\",\"0.04903166\"],[\"0.02040008\",\"0.08873288\"],[\"0.02045670\",\"0.49817943\"],[\"0.02049990\",\"12.62152506\"],[\"0.02061564\",\"0.40901775\"],[\"0.02100000\",\"0.71560677\"],[\"0.02100000\",\"0.05000000\"],[\"0.02100000\",\"0.11000000\"],[\"0.02100000\",\"0.60000000\"],[\"0.02200000\",\"4.74271503\"],[\"0.02260000\",\"0.54864762\"],[\"0.02260002\",\"0.06629717\"],[\"0.02296219\",\"1.25370690\"],[\"0.02416000\",\"40.34813686\"],[\"0.02443672\",\"10.00000000\"],[\"0.02460007\",\"4.64638428\"],[\"0.02472500\",\"0.50000000\"],[\"0.02500000\",\"0.05867647\"],[\"0.02500000\",\"3.18490855\"],[\"0.02500000\",\"0.16513599\"],[\"0.02600000\",\"4.00000000\"],[\"0.02720000\",\"0.04000000\"],[\"0.02786660\",\"0.07000000\"],[\"0.02900000\",\"10.00000000\"],[\"0.02900000\",\"1.00000000\"],[\"0.02967000\",\"0.50000000\"],[\"0.02999990\",\"0.05681977\"],[\"0.03000000\",\"2.42990806\"],[\"0.03090000\",\"1.65890000\"],[\"0.03289566\",\"2.45139202\"],[\"0.03443672\",\"10.00000000\"],[\"0.03461500\",\"0.50000000\"],[\"0.03670000\",\"0.41480543\"],[\"0.04000000\",\"5.00000000\"],[\"0.04443672\",\"10.00000000\"],[\"0.04563987\",\"30.00000000\"],[\"0.04700000\",\"0.75006511\"],[\"0.04814004\",\"2.00000000\"],[\"0.05000000\",\"1.48253029\"],[\"0.05443672\",\"10.00000000\"],[\"0.05936220\",\"25.35316890\"],[\"0.06443672\",\"10.00000000\"],[\"0.07443672\",\"10.00000000\"],[\"0.07500000\",\"10.00000000\"],[\"0.07895628\",\"30.00000000\"],[\"0.08000000\",\"0.05929369\"],[\"0.08443672\",\"10.00000000\"],[\"0.09443672\",\"10.00000000\"],[\"0.09999999\",\"20.05100000\"],[\"0.10000000\",\"5.00000000\"],[\"0.10000000\",\"0.05883285\"],[\"0.11000005\",\"2.39040866\"],[\"0.11110000\",\"5.00000000\"],[\"0.11630000\",\"5.07270242\"],[\"0.11700500\",\"0.34890290\"],[\"0.14562893\",\"30.00000000\"],[\"0.15000000\",\"3.00000000\"],[\"0.15000000\",\"1.00413894\"],[\"0.17752150\",\"10.00000000\"],[\"0.20000000\",\"0.21274775\"],[\"0.35000000\",\"3.07586023\"],[\"0.36750000\",\"2.00000000\"],[\"0.50000000\",\"2.00000000\"],[\"0.76000000\",\"0.05037876\"],[\"0.95000000\",\"0.26258835\"],[\"0.98011100\",\"5.00000000\"],[\"0.98999000\",\"1.20000000\"],[\"1.00000000\",\"1.00000000\"],[\"1.00000000\",\"4.00000000\"],[\"1.00000000\",\"1.00000000\"],[\"1.00000000\",\"0.30488136\"],[\"1.00000000\",\"0.14266380\"],[\"1.00000000\",\"0.34300000\"],[\"1.00000000\",\"1.09104739\"],[\"1.00000000\",\"0.20391185\"],[\"1.01652881\",\"2.77685853\"],[\"1.01670000\",\"4.34847343\"],[\"1.01985287\",\"0.05032291\"],[\"1.07000000\",\"10.00000000\"],[\"1.29900000\",\"5.73215975\"],[\"1.31715072\",\"3.79607278\"],[\"1.47000000\",\"2.00000000\"],[\"1.70000000\",\"1.00000000\"],[\"2.20000000\",\"1.00000000\"]]}";
		
		String [] strings = jsonString.split("asks");
				
		System.out.println(strings[0]);
		System.out.println(strings[1]);
		
		JSONObject object = new JSONObject(jsonString);
		
		JSONArray jsonBids = object.getJSONArray("bids");
		
		JSONArray jsonAsks = object.getJSONArray("asks");
		
		int len = 1;
		
		Order [] orders = new Order[len];
		
		double bid, bidAmount;
		double ask, askAmount;
		
		JSONArray jsonBid, jsonAsk;
		for (int i=0;i<orders.length;i++) {
			
			jsonBid = jsonBids.getJSONArray(i);
			jsonAsk = jsonAsks.getJSONArray(i);
			
			bid = jsonBid.getDouble(0);
			bidAmount = jsonBid.getDouble(1);
			
			ask = jsonAsk.getDouble(0);
			askAmount = jsonAsk.getDouble(1);
			
			orders[i] = new Order(new Order.Book(Order.Type.Bid, bid, bidAmount), 
					new Order.Book(Order.Type.Ask, ask, askAmount));
		}

		System.out.println(orders[0]);
		System.out.println(String.format("%.8f", orders[0].bid.rate));
	}

}
